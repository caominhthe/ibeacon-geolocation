{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/login/login.module.ts","../../src/pages/login/login.ts","../../src/enviroments/enviroment.ts","../../src/pages/home/home.module.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/pages/home/home.ts","../../src/shared/header.component.ts","../../src/app/app.component.ts","../../src/providers/general-provider.service.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,kC;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;ACpByC;AACO;AACZ;AAapC;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAX3B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yDAAS;aACV;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;aACpC;YACD,OAAO,EAAE;gBACP,yDAAS;aACV;SACF,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACfY;AACsD;AAEF;AACjC;AAClB;AAQzC;IAIE,mBAAmB,GAAkB,EAC3B,QAAkB,EAClB,MAAc;QAFL,QAAG,GAAH,GAAG,CAAe;QAC3B,aAAQ,GAAR,QAAQ,CAAU;QAClB,WAAM,GAAN,MAAM,CAAQ;IACxB,CAAC;IAED,4BAAQ,GAAR;QAAA,iBAYC;QAXC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,2DAA2D,CAAC,CAAC;YACxH,KAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,2BAA2B,EAAE,4EAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC;iBACzG,IAAI,CAAC,UAAC,YAAkC;gBACvC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;gBAC/B,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7B,CAAC,CAAC;iBACD,KAAK,CAAC,UAAC,CAAM;gBACZ,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IACJ,CAAC;IAED,yBAAK,GAAL;QAAA,iBAQC;QAPC,IAAM,WAAW,GAA0B,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,2DAA2D,CAAC,CAAC;QAEhJ,WAAW,CAAC,iBAAiB,CAAC,2BAA2B,EAAE,4EAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,uBAAuB,EAAE,IAAI,EAAE,IAAI,CAAC;aAC7H,IAAI,CAAC,UAAC,YAAkC;YACvC,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC7B,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAM,IAAK,cAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,EAApC,CAAoC,CAAC,CAAC;IAC7D,CAAC;IA/BU,SAAS;QAJrB,wEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACG;SAC1B,CAAC;4EAKqC;YACjB,uEAAQ;YACV,MAAM;OANb,SAAS,CAgCrB;IAAD,CAAC;AAAA;SAhCY,SAAS,e;;;;;;;;ACbtB;AAAA,gFAAgF;AAChF,2EAA2E;AAC3E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;IACjB,qBAAqB,EAAE,KAAK;IAC5B,iBAAiB,EAAE,IAAI;IACvB,gBAAgB,EAAE,CAAC;IACnB,OAAO,EAAE;QACP;YACE,IAAI,EAAE,YAAY;YAClB,IAAI,EAAE,sCAAsC,CAAC,UAAU;SACxD;QACD;YACE,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE,sCAAsC,CAAC,UAAU;SACxD;QACD;YACE,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE,sCAAsC,CAAC,UAAU;SACxD;QACD;YACE,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE,sCAAsC,CAAC,UAAU;SACxD;KACF;IACD,WAAW,EAAE,iEAAiE;IAC9E,UAAU,EAAE;QACV,MAAM,EAAE,yBAAyB;QACjC,qBAAqB,EAAE,2DAA2D;QAClF,QAAQ,EAAE,sCAAsC;QAChD,SAAS,EAAE;YACT,uCAAuC,EAAE,sCAAsC;SAChF;KACF;CACF,CAAC;AAEF;;;;;GAKG;AACH,mEAAmE;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CjC;AACO;AACO;AACA;AACyB;AACT;AACV;AACiB;AACW;AAoBlF;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAlB1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;gBACR,iFAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;YACD,OAAO,EAAE;gBACP,uDAAQ;aACT,EAAC,SAAS,EAAE;gBACX,sEAAO;gBACP,4EAAU;gBACV,6FAAkB;gBAClB,mGAAsB;gBACtB,8EAAgB;aACjB;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;AC5B8C;AAC5B;AACN;AAEvC,yBAAyB;AACzB,+EAAc,EAAE,CAAC;AAEjB,yGAAsB,EAAE,CAAC,eAAe,CAAC,8DAAS,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPM;AACF;AACD;AACkB;AACrB;AACK;AACT;AACV;AAGe;AACN;AACe;AACH;AACI;AAEZ;AA0CnD;IAAA;IACA,CAAC;IADY,SAAS;QAxCrB,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,6DAAK;aACN;YACD,OAAO,EAAE;gBACP,gFAAa;gBACb,2EAAe;gBACf,wEAAc;gBACd,8EAAgB;gBAChB,kEAAW,CAAC,OAAO,CAAC,6DAAK,EAAE;oBACzB,aAAa,EAAE,KAAK;oBACpB,YAAY,EAAE,IAAI;oBAClB,eAAe,EAAE,KAAK;iBACvB,EACL;oBACE,KAAK,EAAE;wBACL,EAAE,YAAY,EAAE,6CAA6C,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;wBAC1I,EAAE,YAAY,EAAE,0CAA0C,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAc,EAAE,EAAE,EAAE;qBACtI;iBACF,CAAC;gBACE,0EAAkB,CAAC,OAAO,CAAC;oBACzB,IAAI,EAAE,sBAAsB;oBAC1B,WAAW,EAAE,CAAC,WAAW,EAAE,QAAQ,EAAE,QAAQ,CAAC;iBACjD,CAAC;aACH;YACD,SAAS,EAAE,CAAC,+DAAQ,CAAC;YACrB,eAAe,EAAE;gBACf,6DAAK;aACN;YACD,SAAS,EAAE;gBACT,2EAAS;gBACT,iFAAY;gBACZ,wEAAQ;gBACR,sFAAc;gBACd,qEAAM;gBACN,0EAAW;gBACX,EAAE,OAAO,EAAE,mEAAY,EAAE,QAAQ,EAAE,wEAAiB,EAAE;aACvD;SACF,CAAC;OAEW,SAAS,CACrB;IAAD,gBAAC;CAAA;AADqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DuC;AACM;AACnB;AAGe;AAC6B;AAC7B;AACJ;AACL;AACiB;AACW;AAQlF;IAqBE,kBAAmB,GAAkB,EAC5B,kBAAsC,EACtC,QAAkB,EAClB,UAAsB,EACtB,OAAgB,EAChB,MAAc,EACb,cAA8B,EAC/B,IAAgB,EAChB,sBAA8C,EAC9C,IAAY;QATrB,iBA6BC;QA7BkB,QAAG,GAAH,GAAG,CAAe;QAC5B,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,aAAQ,GAAR,QAAQ,CAAU;QAClB,eAAU,GAAV,UAAU,CAAY;QACtB,YAAO,GAAP,OAAO,CAAS;QAChB,WAAM,GAAN,MAAM,CAAQ;QACb,mBAAc,GAAd,cAAc,CAAgB;QAC/B,SAAI,GAAJ,IAAI,CAAY;QAChB,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,SAAI,GAAJ,IAAI,CAAQ;QA3BrB,mBAAc,GAAG,SAAS,CAAC,MAAM,CAAC;QAClC,uBAAkB,GAAG,KAAK,CAAC;QAE3B,iBAAY,GAAW,EAAE,CAAC;QAC1B,UAAK,GAAY,IAAI,CAAC;QAEtB,YAAO,GAAG,EAAE,CAAC;QAGb,aAAQ,GAAG,CAAC,CAAC;QAGb,gBAAW,GAAG,EAAE,CAAC;QACjB,wBAAmB,GAAG,4DAA4D,CAAC;QACnF,0BAAqB,GAAG,2DAA2D,CAAC;QACpF,sBAAiB,GAAG,sCAAsC,CAAC;QAczD,IAAI,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;QAC1C,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;QAE7B,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;;;;wBACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,4EAAW,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC;wBACzG,qBAAM,IAAI,CAAC,UAAU,EAAE;;wBAAvB,SAAuB,CAAC;wBACxB,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;wBAC/B,qBAAM,IAAI,CAAC,8BAA8B,EAAE;;wBAA3C,SAA2C,CAAC;wBAC5C,qBAAM,IAAI,CAAC,2BAA2B,EAAE;;wBAAxC,SAAwC,CAAC;wBACzC,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;;wBAAxB,SAAwB,CAAC;wBACzB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;wBACtB,IAAI,CAAC,eAAe,EAAE,CAAC;wBACvB,IAAI,CAAC,oBAAoB,EAAE,CAAC;wBAC5B,IAAI,CAAC,sBAAsB,EAAE,CAAC;wBAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;;;;aACvB,CAAC,CAAC;IACL,CAAC;IAEK,8CAA2B,GAAjC;;;;;;8BAC4B,EAAZ,SAAI,CAAC,OAAO;;;6BAAZ,eAAY;wBAAjB,CAAC;wBACR,qBAAM,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC,CAAC;;wBAAjD,SAAiD,CAAC;;;wBADtC,IAAY;;;;;;KAE3B;IAEK,6CAA0B,GAAhC;;;;;;8BAC4B,EAAZ,SAAI,CAAC,OAAO;;;6BAAZ,eAAY;wBAAjB,CAAC;wBACR,qBAAM,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC;;wBAAhD,SAAgD,CAAC;;;wBADrC,IAAY;;;;;;KAE3B;IAED,kCAAe,GAAf;QAAA,iBAuBC;QAtBC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC;;;;;;;wBAE1B,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;wBAC1B,qBAAM,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;;wBAAxB,SAAwB,CAAC;wBACzB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;wBACtB,qBAAM,IAAI,CAAC,2BAA2B,EAAE;;wBAAxC,SAAwC,CAAC;wBACzC,IAAI,CAAC,cAAc,EAAE,CAAC;wBACtB,UAAU,CAAC;;;;;wCACT,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wCACzB,IAAI,CAAC,0BAA0B,EAAE,CAAC;8CACC,EAAhB,SAAI,CAAC,WAAW;;;6CAAhB,eAAgB;wCAA1B,MAAM;wCACS,qBAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE;;wCAAvD,eAAe,GAAG,SAAqC;wCAC3D,qBAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,eAAe,CAAC;;wCAApD,SAAoD,CAAC;;;wCAFpC,IAAgB;;;wCAGlC,CAAC;wCACF,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;wCACtB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;wCAClB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;;;6BACtB,EAAE,4EAAW,CAAC,iBAAiB,CAAC;;;;wBAEjC,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;;;;;aAEvC,EAAE,4EAAW,CAAC,qBAAqB,CAAC;IACvC,CAAC;IAED,6BAAU,GAAV;QAAA,iBA6CC;QA5CC,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACxC,EAAE,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAEhC,KAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE,CAAC;gBAE1C,IAAM,OAAO,GAAG,4EAAW,CAAC,OAAO,CAAC;gBACpC,OAAO,CAAC,OAAO,CAAC,UAAC,CAAC;oBAChB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;gBAC9D,CAAC,CAAC,CAAC;gBAEH,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;gBAExC,IAAI,CAAC;oBACH,KAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE;yBACpC,SAAS,CACR,cAAI;wBACF,KAAI,CAAC,QAAQ,EAAE,CAAC;wBAChB,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;4BACZ,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC;4BAC9B,UAAU,CAAC,OAAO,CAAC,UAAC,MAAM;gCACxB,IAAM,GAAG,GAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,EAA3E,CAA2E,CAAC,CAAC;gCACzH,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,CAAE,CAAC,CAAC,CAAC;oCACd,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;wCACrG,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gCACnD,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACN,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wCACnB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oCAChC,CAAC;gCACH,CAAC;4BACH,CAAC,CAAC,CAAC;wBACL,CAAC,CAAC,CAAC;oBACL,CAAC,EACD,eAAK,IAAI,cAAO,CAAC,KAAK,EAAE,EAAf,CAAe,CACzB,CAAC;gBACN,CAAC;gBAAC,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;oBACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;gBACD,OAAO,CAAC,IAAI,CAAC,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,CAAC,KAAK,CAAC,kDAAkD,CAAC,CAAC;gBAClE,OAAO,CAAC,KAAK,CAAC,CAAC;YACjB,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAED,iDAA8B,GAA9B;QAAA,iBAuBC;QAtBC,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO;YACzB,IAAI,CAAC;gBACH,KAAI,CAAC,KAAK,GAAS,MAAO,CAAC,qBAAqB,CAAC;gBAEjD,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBACf,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC;wBACf,eAAe,EAAE,CAAC;wBAClB,cAAc,EAAE,EAAE;wBAClB,gBAAgB,EAAE,EAAE;wBACpB,2BAA2B,EAAE,KAAK;wBAClC,WAAW,EAAE,CAAC;wBACd,KAAK,EAAE,KAAK;wBACZ,eAAe,EAAE,KAAK;wBACtB,WAAW,EAAE,IAAI;qBAClB,EAAE;wBACD,OAAO,CAAC,IAAI,CAAC;oBACf,CAAC,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;YAAC,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;gBACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,mCAAgB,GAAtB,UAAuB,MAAM,EAAE,eAAe;;;;;;;wBAEtC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,EAA3E,CAA2E,CAAC,CAAC;wBACxH,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;wBAEvB,6DAA6D;wBAC7D,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,aAAa,CAAC,IAAI,IAAI,CAAC,CAAM,GAAG,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,4EAAW,CAAC,gBAAgB,CAAE,CAAC,CAAC,CAAC;4BAC/G,MAAM,gBAAC;wBACT,CAAC;wBAED,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;4BACnB,aAAa,GAAG,MAAM,CAAC;4BACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;wBAChC,CAAC;wBAEkB,qBAAM,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,2BAA2B,EAAE,4EAAW,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC;;wBAAjI,YAAY,GAAG,SAAkH;wBACrI,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,WAAW,EAAE,MAAM,EAAE,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC;;;;wBAE/E,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAC,CAAC,CAAC,CAAC;wBAC/B,EAAE,CAAC,CAAC,GAAC,CAAC,IAAI,IAAI,mCAAmC,CAAC,CAAC,CAAC;4BAClD,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC;4BACrC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;4BAC/B,IAAI,CAAC,sBAAsB,CAAC,cAAc,EAAE;4BAC5C,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;wBACjC,CAAC;wBACD,IAAI,CAAC,sBAAsB,CAAC,mBAAmB,EAAE,CAAC;wBAClD,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC;;;;;;KAElB;IAEK,+BAAY,GAAlB,UAAmB,WAAW,EAAE,MAAM,EAAE,MAAM;;;;;;wBACtC,WAAW,GAAG;4BAClB,OAAO,EAAE,IAAI,yEAAW,CAAC;gCACvB,cAAc,EAAG,kBAAkB;gCACnC,eAAe,EAAE,SAAS,GAAG,WAAW;6BACzC,CAAC;yBACH,CAAC;wBACE,SAAS,GAAG;4BACd,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;4BAC9B,WAAW,EAAE,MAAM,CAAC,WAAW,CAAC;4BAChC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC;4BACxB,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;4BAC9B,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC;4BAC5B,MAAM,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,WAAW,EAAE;4BAClC,QAAQ,EAAE;gCACR,eAAe,EAAE,MAAM,CAAC,MAAM,CAAC;gCAC/B,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC;gCACtB,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC;gCACxB,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC;6BACzB;yBACF;;;;wBAEY,qBAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,4EAAW,CAAC,WAAW,EAAE,SAAS,EAAE,WAAW,CAAE,CAAC,SAAS,EAAE;;wBAAzF,IAAI,GAAG,SAAkF;wBAC7F,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC9C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,UAAC,CAAC;4BACxC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gCAChF,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gCACxC,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;gCACtB,MAAM,CAAC,GAAG,CAAC;4BACb,CAAC;4BACD,MAAM,CAAC,CAAC,CAAC;wBACX,CAAC,CAAC,CAAC;;;;wBAEH,IAAI,CAAC,sBAAsB,CAAC,6BAA6B,EAAE,CAAC;;;;;;KAE/D;IAED,sCAAmB,GAAnB;QAAA,iBAUC;QATC,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE;aAChC,IAAI,CAAC,UAAC,KAAK;YACV,EAAE,CAAC,CAAC,KAAK,IAAI,KAAI,CAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,EAAC;gBACtD,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC/B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBAC9B,KAAI,CAAC,sBAAsB,CAAC,iBAAiB,EAAE,CAAC;YAClD,CAAC;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,uCAAoB,GAApB;QAAA,iBAKC;QAJC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAG,cAAI,YAAI,CAAC,cAAc,GAAG,IAAI,EAA1B,CAA0B,CAAC,CAAC;QACnE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE;YACjC,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC9B,CAAC,CAAC,CAAC;IACL,CAAC;IACD,yCAAsB,GAAtB;QAAA,iBAIC;QAHC,IAAI,CAAC,UAAU,CAAC,mCAAmC,CAAC;YAClD,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6CAA0B,GAA1B;QAAA,iBASC;QARC,IAAI,CAAC,UAAU,CAAC,8BAA8B,EAAE;aAC7C,IAAI,CAAC,UAAC,GAAQ;YACb,EAAE,CAAC,CAAC,GAAG,IAAI,YAAY,CAAC,EAAC;gBACvB,KAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YACjC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAClC,CAAC;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iCAAc,GAAd;QACE,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAClC,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAED,yBAAM,GAAN;QAAA,iBAMC;QALC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;QAC9B,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC/B,UAAU,CAAC;YACT,KAAI,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QACjC,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;IAED,8BAAW,GAAX;QACE,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACjC,CAAC;IApRU,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;0GAsBqC;YACR,gEAAkB;YAC5B,4EAAQ;YACN,uEAAU;YACb,sEAAO;YACR,qFAAM;YACG,yEAAc;YACzB,mGAAU;YACQ,+DAAsB;YACxC,KAAM;OA9BV,QAAQ,CAqRpB;IAAD,CAAC;AAAA;SArRY,QAAQ,e;;;;;;;;;;;;;;;;;;;;;;ACnBwC;AAGqB;AACV;AACO;AAM/E;IAQE,yBACU,SAA0B,EAC1B,sBAA8C,EAC9C,OAAsB;QAFtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,YAAO,GAAP,OAAO,CAAe;QAThC,mBAAc,GAAG,KAAK,CAAC;QAGvB,WAAM,GAAG,IAAI,mEAAY,EAAE,CAAC;IAO1B,CAAC;IAEH,0CAAgB,GAAhB;QAAA,iBAoBC;QAnBC,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,SAAS;YAChB,OAAO,EAAE,yBAAyB;YAClC,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE;wBACP,KAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,CAAC;wBACrC,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;oBACrB,CAAC;iBACF;aAAC;SACL,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IA7BD;QADC,qEAAM,EAAE;;mDACmB;IALjB,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACgB;SACvC,CAAC;gHAUoC;YACF,gGAAsB;YACrC,YAAa;OAXrB,eAAe,CAmC3B;IAAD,CAAC;AAAA;SAnCY,eAAe,oB;;;;;;;;;;;;;;;;;;;;;;;;;ACXyB;AACP;AACO;AACM;AACT;AAED;AAC2C;AAY5F;IAOE,eACS,QAAkB,EAClB,SAAoB,EACpB,YAA0B,EAC1B,MAAc,EACd,QAAkB;QAJlB,aAAQ,GAAR,QAAQ,CAAU;QAClB,cAAS,GAAT,SAAS,CAAW;QACpB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAU;QAEzB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,6BAAa,GAAb;QAAA,iBAQC;QAPC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;YACzB,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;YACtB,KAAI,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACrC,KAAI,CAAC,QAAQ,GAAG,qEAAS,CAAC;YAE1B,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,wBAAQ,GAAR,UAAS,IAAI;QACX,oCAAoC;IACtC,CAAC;IAED,sBAAM,GAAN;QACE,IAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,2DAA2D,CAAC,CAAC;QACzH,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,qEAAS,CAAC,CAAC;IAC9B,CAAC;IAlCe;QAAf,yEAAS,CAAC,0DAAG,CAAC;kCAAM,0DAAG;sCAAC;IADd,KAAK;QAJjB,wEAAS,CAAC;WACc;SACxB,CAAC;wFAU2B;YACP,iFAAS;YACN,sEAAY;YAClB,wEAAM;YACJ,EAAQ;OAZhB,KAAK,CAqCjB;IAAD,CAAC;AAAA;SArCY,KAAK,2B;;;;;;;;;;;;;;;;;;;;;;;;ACnBuB;AACmD;AAC5C;AAEuB;AACR;AACmB;AAGlF;IAEE,gCACU,MAAc,EACd,IAAgB,EAChB,SAA0B,EAC1B,cAA8B,EAC9B,kBAAsC;QAJtC,WAAM,GAAN,MAAM,CAAQ;QACd,SAAI,GAAJ,IAAI,CAAY;QAChB,cAAS,GAAT,SAAS,CAAiB;QAC1B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,uBAAkB,GAAlB,kBAAkB,CAAoB;IAEhD,CAAC;IAEM,uCAAM,GAAb;QACE,IAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,2DAA2D,CAAC,CAAC;QACzH,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IACjC,CAAC;IAGM,kDAAiB,GAAxB;QACE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC/B,EAAE,EAAE,CAAC;YACL,IAAI,EAAE,8BAA8B;YACpC,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC;IACL,CAAC;IAEM,4CAAW,GAAlB,UAAmB,GAAG;QACpB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,SAAS;YAChB,OAAO,EAAE,GAAG;YACZ,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,IAAI;iBACX;aAAC;SACL,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAEM,8DAA6B,GAApC;QACE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC/B,EAAE,EAAE,CAAC;YACL,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC;IACL,CAAC;IAEM,gDAAe,GAAtB;QACE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC/B,EAAE,EAAE,CAAC;YACL,IAAI,EAAE,sCAAsC;YAC5C,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC;IACL,CAAC;IAEM,oDAAmB,GAA1B;QACE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC/B,EAAE,EAAE,CAAC;YACL,IAAI,EAAE,gDAAgD;YACtD,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC;IACL,CAAC;IAEM,+CAAc,GAArB;QACE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC;YAC/B,EAAE,EAAE,CAAC;YACL,IAAI,EAAE,6DAA6D;YACnE,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,IAAI;SACZ,CAAC,CAAC;IACL,CAAC;IAxEU,sBAAsB;QADlC,yEAAU,EAAE;yCAIO,qEAAM;YACR,wEAAU;YACL,wGAAe;YACV,qFAAc;YACV,6FAAkB;OAPrC,sBAAsB,CA2ElC;IAAD,6BAAC;CAAA;AA3EkC","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 118;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 118\n// module chunks = 0","var map = {\n\t\"../pages/home/home.module\": [\n\t\t164\n\t],\n\t\"../pages/login/login.module\": [\n\t\t160\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 159;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 159\n// module chunks = 0","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component} from '@angular/core';\nimport {NavController, AlertController, ToastController, MenuController} from 'ionic-angular';\nimport {HomePage} from '../home/home';\nimport { MSAdal, AuthenticationContext, AuthenticationResult } from '@ionic-native/ms-adal';\nimport { environment } from '../../enviroments/enviroment';\nimport { IonicPage, Platform } from \"ionic-angular\";\n\n@IonicPage({\n  name: 'login-page'\n})\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n\n  authContext: any;\n\n  constructor(public nav: NavController,\n    private platform: Platform,\n    private msAdal: MSAdal) {\n  }\n\n  ngOnInit() {\n    this.platform.ready().then(() => {\n      this.authContext = this.msAdal.createAuthenticationContext('https://login.microsoftonline.com/sitaiot.onmicrosoft.com');\n      this.authContext.acquireTokenSilentAsync('https://graph.windows.net', environment.adalConfig.clientId, null)\n        .then((authResponse: AuthenticationResult) => {\n          console.log('the bug is here');\n          this.nav.push('home-page');\n        })\n        .catch((e: any) => {\n          console.log('No token found in cache');\n        });\n    })\n  }\n\n  login() {\n    const authContext: AuthenticationContext = this.msAdal.createAuthenticationContext('https://login.microsoftonline.com/sitaiot.onmicrosoft.com');\n\n    authContext.acquireTokenAsync('https://graph.windows.net', environment.adalConfig.clientId, 'http://localhost:4200', null, null)\n      .then((authResponse: AuthenticationResult) => {\n        this.nav.push('home-page');\n      })\n      .catch((e: any) => console.log('Authentication failed'));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  beaconRangingInterval: 10000, //ms\n  beaconRangingTime: 5000, //ms\n  beaconTimeoutAge: 0, //ms\n  regions: [\n    {\n      name: 'TestRegion', //required\n      uuid: 'B9407F30-F5F8-466E-AFF9-25556B57FE6D' //required\n    },\n    {\n      name: 'TestRegion 1', //required\n      uuid: 'A22D8D96-4D06-D8C7-7AAD-7F4F433F6996' //required\n    },\n    {\n      name: 'TestRegion 2', //required\n      uuid: '9B0FB33A-583D-2614-5D19-AC4FB1A3D5FB' //required\n    },\n    {\n      name: 'TestRegion 3', //required\n      uuid: '18B77746-0AE4-852D-423A-8805A96CFBAF' //required\n    },\n  ],\n  crowdApiUrl: 'https://crowd-api.westeurope.cloudapp.azure.com/crowd-positions',\n  adalConfig: {\n    tenant: 'sitaiot.onmicrosoft.com',\n    authenticationContext: 'https://login.microsoftonline.com/sitaiot.onmicrosoft.com',\n    clientId: 'c023c4e4-b84a-4c1a-ace3-d32289f08cff',\n    endpoints: {\n      'https://uld-api.sita.siclo-mobile.com': 'c03ed3b4-5438-4247-b6cd-ef2e20da60fe',\n    },\n  }\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n\n\n\n// WEBPACK FOOTER //\n// ./src/enviroments/enviroment.ts","import { HomePage } from \"./home\";\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { IBeacon } from '@ionic-native/ibeacon';\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\nimport { HeaderComponent } from \"../../shared/header.component\";\nimport { Diagnostic } from '@ionic-native/diagnostic';\nimport { LocalNotifications } from '@ionic-native/local-notifications';\nimport { GeneralProviderService } from \"../../providers/general-provider.service\";\n\n@NgModule({\n  declarations: [\n    HomePage,\n    HeaderComponent\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n  exports: [\n    HomePage\n  ],providers: [\n    IBeacon,\n    Diagnostic,\n    LocalNotifications,\n    GeneralProviderService,\n    HttpClientModule\n  ]\n})\nexport class HomePageModule {}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import {platformBrowserDynamic} from \"@angular/platform-browser-dynamic\";\nimport {enableProdMode} from '@angular/core';\nimport {AppModule} from \"./app.module\";\n\n// this is the magic wand\nenableProdMode();\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { IonicStorageModule } from '@ionic/storage';\nimport {SplashScreen} from '@ionic-native/splash-screen';\nimport {Keyboard} from '@ionic-native/keyboard';\nimport {MyApp} from './app.component';\nimport {HomePage} from '../pages/home/home';\nimport {LoginPage} from '../pages/login/login';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { MSAdal } from '@ionic-native/ms-adal';\nimport { LoginPageModule } from '../pages/login/login.module';\nimport { HomePageModule } from '../pages/home/home.module';\nimport { BackgroundMode } from '@ionic-native/background-mode';\nimport { HeaderComponent } from \"../shared/header.component\";\nimport { Crashlytics } from '@ionic-native/fabric';\n\n@NgModule({\n  declarations: [\n    MyApp,\n  ],\n  imports: [\n    BrowserModule,\n    LoginPageModule,\n    HomePageModule,\n    HttpClientModule,\n    IonicModule.forRoot(MyApp, {\n      scrollPadding: false,\n      scrollAssist: true,\n      autoFocusAssist: false\n    }),\n    IonicStorageModule.forRoot({\n      name: '__ionic3_start_theme',\n        driverOrder: ['indexeddb', 'sqlite', 'websql']\n    })\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Keyboard,\n    BackgroundMode,\n    MSAdal,\n    Crashlytics,\n    { provide: ErrorHandler, useClass: IonicErrorHandler }\n  ]\n})\n\nexport class AppModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, NgZone, OnDestroy } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform } from 'ionic-angular';\nimport { IBeacon } from '@ionic-native/ibeacon';\nimport { debounceTime } from 'rxjs/operators';\nimport { Events } from 'ionic-angular';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { MSAdal, AuthenticationContext, AuthenticationResult } from '@ionic-native/ms-adal';\nimport { BackgroundMode } from '@ionic-native/background-mode';\nimport { environment } from '../../enviroments/enviroment';\nimport { Diagnostic } from '@ionic-native/diagnostic';\nimport { LocalNotifications } from '@ionic-native/local-notifications';\nimport { GeneralProviderService } from \"../../providers/general-provider.service\";\n\n@IonicPage({\n  name: 'home-page'\n})\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage implements OnDestroy {\n\n  bluetoothAvaible: boolean;\n  networkAvaible = navigator.onLine;\n  geolocationAvaible = false;\n\n  platformList: string = '';\n  isApp: boolean = true;\n  delegate : any;\n  regions = [];\n  beacons: any;\n  bgGeo: any;\n  counting = 0;\n  authContext: any;\n  taskRunner: any;\n  beaconArray = [];\n  bluetoothWarningMsg = 'Please Enable Bluetooth for the application work correctly';\n  geolocationWarningMsg = 'You must enable \"Always\" in the Location Services setting';\n  networkWarningMsg = 'Please check your network connection';\n  status: string;\n\n  constructor(public nav: NavController,\n    public localNotifications: LocalNotifications,\n    public platform: Platform,\n    public diagnostic: Diagnostic,\n    public iBeacon: IBeacon,\n    public msAdal: MSAdal,\n    private backgroundMode: BackgroundMode,\n    public http: HttpClient,\n    public generalProviderService: GeneralProviderService,\n    public zone: NgZone\n  ) {\n    let platforms = this.platform.platforms();\n    this.backgroundMode.enable();\n\n    this.platformList = platforms.join(', ');\n\n    this.platform.ready().then(async () => {\n      this.authContext = this.msAdal.createAuthenticationContext(environment.adalConfig.authenticationContext);\n      await this.initialise();\n      this.iBeacon.enableBluetooth();\n      await this.configureBackgroundGeolocation();\n      await this.startRangingBeaconsInRegion();\n      await this.bgGeo.start();\n      this.status = 'Start';\n      this.setupTaskRunner();\n      this.registerNetworkCheck();\n      this.registerBluetoothCheck();\n      this.checkAppStatus();\n    });\n  }\n\n  async startRangingBeaconsInRegion() {\n    for (let i of this.regions)\n      await this.iBeacon.startRangingBeaconsInRegion(i);\n  }\n\n  async stopRangingBeaconsInRegion() {\n    for (let i of this.regions)\n      await this.iBeacon.stopRangingBeaconsInRegion(i);\n  }\n\n  setupTaskRunner() {\n    this.taskRunner = setInterval(async() => {\n      try {\n        console.log('Task start');\n        await this.bgGeo.start();\n        this.status = 'Start';\n        await this.startRangingBeaconsInRegion();\n        this.checkAppStatus();\n        setTimeout(async () => {\n          console.log('Task stop');\n          this.stopRangingBeaconsInRegion();\n          for (let beacon of this.beaconArray) {\n            let currentLocation = await this.bgGeo.getCurrentPosition();\n            await this.postCrowdPostion(beacon, currentLocation);\n          };\n          this.beaconArray = [];\n          this.bgGeo.stop();\n          this.status = 'Stop';\n        }, environment.beaconRangingTime)\n      } catch (e) {\n        console.log('Error ranging beacon');\n      }\n    }, environment.beaconRangingInterval)\n  }\n\n  initialise(): any {\n    let promise = new Promise((resolve, reject) => {\n      if (this.platform.is('cordova')) {\n\n        this.iBeacon.requestAlwaysAuthorization();\n\n        const regions = environment.regions;\n        regions.forEach((r) => {\n          this.regions.push(this.iBeacon.BeaconRegion(r.name, r.uuid))\n        });\n\n        this.delegate = this.iBeacon.Delegate();\n\n        try {\n          this.delegate.didRangeBeaconsInRegion()\n            .subscribe(\n              data => {\n                this.counting++;\n                this.zone.run(() => {\n                  let beaconList = data.beacons;\n                  beaconList.forEach((beacon) => {\n                    const idx = this.beaconArray.findIndex(i => i.uuid == beacon.uuid && i.major == beacon.major && i.minor == beacon.minor);\n                    if (idx > -1 ) {\n                      this.beaconArray[idx]['rssi'] = beacon['rssi'] == 0 || this.beaconArray[idx]['rssi'] > beacon['rssi'] ?\n                        this.beaconArray[idx]['rssi'] : beacon['rssi'];\n                    } else {\n                      if (beacon['rssi']) {\n                        this.beaconArray.push(beacon);\n                      }\n                    }\n                  });\n                });\n              },\n              error => console.error()\n            );\n        } catch(e) {\n          console.log(e);\n        }\n        resolve(true);\n      } else {\n        console.error('This application needs to be running on a device');\n        resolve(false);\n      }\n    });\n    return promise;\n  }\n\n  configureBackgroundGeolocation() {\n    return new Promise((resolve) => {\n      try {\n        this.bgGeo = (<any>window).BackgroundGeolocation;\n\n        if (this.bgGeo) {\n          this.bgGeo.ready({\n            desiredAccuracy: 0,\n            distanceFilter: 10,\n            stationaryRadius: 25,\n            activityRecognitionInterval: 10000,\n            stopTimeout: 5,\n            debug: false,\n            stopOnTerminate: false,\n            startOnBoot: true,\n          }, () => {\n            resolve(true)\n          });\n        }\n      } catch(e) {\n        console.log(e);\n      }\n    });\n  }\n\n  async postCrowdPostion(beacon, currentLocation) {\n    try {\n      let currentBeacon = this.beaconArray.find((i) => i.uuid == beacon.uuid && i.major == beacon.major && i.minor == beacon.minor);\n      const now = new Date();\n\n      // Not update location of Uld that get updated in last 5 mins\n      if (!!currentBeacon && currentBeacon.date && ((<any>now - currentBeacon.date) < environment.beaconTimeoutAge) ) {\n        return;\n      }\n\n      if (!currentBeacon) {\n        currentBeacon = beacon;\n        this.beaconArray.push(beacon);\n      }\n\n      let authResponse = await this.authContext.acquireTokenSilentAsync('https://graph.windows.net', environment.adalConfig.clientId, null);\n      this.callCrowdAPI(authResponse.accessToken, beacon, currentLocation['coords']);\n    } catch(e) {\n      console.log(JSON.stringify(e));\n      if (e.code == 'AD_ERROR_SERVER_USER_INPUT_NEEDED') {\n        this.generalProviderService.logOut();\n        clearInterval(this.taskRunner);\n        this.generalProviderService.showLogoutNoti()\n        this.nav.setRoot('login-page');\n      }\n      this.generalProviderService.generalErrorHandler();\n      console.log(e);\n    }\n  }\n\n  async callCrowdAPI(accessToken, beacon, coords) {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type':  'application/json',\n        'Authorization': 'Bearer ' + accessToken\n      })\n    };\n    let crowdInfo = {\n      'latitude': coords['latitude'],\n      'longitude': coords['longitude'],\n      'speed': coords['speed'],\n      'accuracy': coords['accuracy'],\n      'heading': coords['heading'],\n      'date': (new Date()).toISOString(),\n      'beacon': {\n        'proximityUUID': beacon['uuid'],\n        'rssi': beacon['rssi'],\n        'major': beacon['major'],\n        'minor': beacon['minor']\n      }\n    }\n    try {\n      let data = await this.http.post(environment.crowdApiUrl, crowdInfo, httpOptions ).toPromise();\n      console.log('update beacon ', beacon['uuid']);\n      this.beaconArray = this.beaconArray.map((i) => {\n        if (i.uuid == beacon.uuid && i.major == beacon.major && i.minor == beacon.minor) {\n          let obj = JSON.parse(JSON.stringify(i));\n          obj.date = new Date();\n          return obj;\n        }\n        return i;\n      });\n    } catch (e) {\n      this.generalProviderService.showLocationAuthorizationNoti();\n    }\n  }\n\n  checkBluetoothState() {\n    this.diagnostic.getBluetoothState()\n      .then((state) => {\n        if (state == this.diagnostic.bluetoothState.POWERED_ON){\n          this.bluetoothAvaible = true;\n        } else {\n          this.bluetoothAvaible = false;\n          this.generalProviderService.showBluetoothNoti();\n        }\n      });\n  }\n\n  registerNetworkCheck() {\n    window.addEventListener('online',  ()=>this.networkAvaible = true);\n    window.addEventListener('offline', ()=> {\n      this.networkAvaible = false;\n    });\n  }\n  registerBluetoothCheck() {\n    this.diagnostic.registerBluetoothStateChangeHandler(() => {\n      this.checkBluetoothState();\n    });\n  }\n\n  checkLocationAuthorization() {\n    this.diagnostic.getLocationAuthorizationStatus()\n      .then((res: any) => {\n        if (res == 'authorized'){\n          this.geolocationAvaible = true;\n        } else {\n          this.geolocationAvaible = false;\n        }\n      });\n  }\n\n  checkAppStatus() {\n    this.checkLocationAuthorization();\n    this.checkBluetoothState();\n  }\n\n  logOut() {\n    this.backgroundMode.disable();\n    clearInterval(this.taskRunner);\n    setTimeout(() => {\n      this.nav.setRoot('login-page');\n    }, 100)\n  }\n\n  ngOnDestroy() {\n    clearInterval(this.taskRunner);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import {Component,Output, EventEmitter} from '@angular/core';\nimport {debounceTime} from 'rxjs/operators';\nimport {Subject} from 'rxjs';\nimport { AlertController } from \"ionic-angular/components/alert/alert-controller\";\nimport { NavController } from \"ionic-angular/navigation/nav-controller\";\nimport { GeneralProviderService } from \"../providers/general-provider.service\";\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n})\nexport class HeaderComponent {\n\n  showSearchType = false;\n\n  @Output()\n  logout = new EventEmitter();\n\n\n  constructor(\n    private alertCtrl: AlertController,\n    private generalProviderService: GeneralProviderService,\n    private navCtrl: NavController\n  ){}\n\n  openLogoutDialog() {\n    let alert = this.alertCtrl.create({\n      title: 'Warning',\n      message: 'Do you want to log out?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Yes',\n          handler: () => {\n            this.generalProviderService.logOut();\n            this.logout.emit();\n          }\n        }]\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/header.component.ts","import { Component, ViewChild } from \"@angular/core\";\nimport { Platform, Nav } from \"ionic-angular\";\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { HomePage } from \"../pages/home/home\";\nimport { LoginPage } from \"../pages/login/login\";\nimport { MSAdal, AuthenticationContext, AuthenticationResult } from '@ionic-native/ms-adal';\n\nexport interface MenuItem {\n    title: string;\n    component: any;\n    icon: string;\n}\n\n@Component({\n  templateUrl: 'app.html'\n})\n\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage: any ;\n\n  appMenuItems: Array<MenuItem>;\n\n  constructor(\n    public platform: Platform,\n    public statusBar: StatusBar,\n    public splashScreen: SplashScreen,\n    public msAdal: MSAdal,\n    public keyboard: Keyboard\n  ) {\n    this.initializeApp();\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      this.statusBar.hide();\n      this.statusBar.overlaysWebView(true);\n      this.rootPage = LoginPage;\n\n      this.keyboard.disableScroll(true);\n    });\n  }\n\n  openPage(page) {\n    // this.nav.setRoot(page.component);\n  }\n\n  logout() {\n    const authContext = this.msAdal.createAuthenticationContext('https://login.microsoftonline.com/sitaiot.onmicrosoft.com');\n    authContext.tokenCache.clear();\n    this.nav.setRoot(LoginPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable} from '@angular/core';\nimport { MSAdal, AuthenticationContext, AuthenticationResult } from '@ionic-native/ms-adal';\nimport {HttpClient} from '@angular/common/http';\nimport { LoginPage } from '../pages/login/login';\nimport { LocalNotifications } from '@ionic-native/local-notifications';\nimport { BackgroundMode } from '@ionic-native/background-mode';\nimport { AlertController } from 'ionic-angular/components/alert/alert-controller';\n\n@Injectable()\nexport class GeneralProviderService {\n\n  constructor(\n    private msAdal: MSAdal,\n    private http: HttpClient,\n    private alertCtrl: AlertController,\n    private backgroundMode: BackgroundMode,\n    private localNotifications: LocalNotifications,\n  ) {\n  }\n\n  public logOut() {\n    const authContext = this.msAdal.createAuthenticationContext('https://login.microsoftonline.com/sitaiot.onmicrosoft.com');\n    authContext.tokenCache.clear();\n  }\n\n\n  public showBluetoothNoti() {\n    this.localNotifications.schedule({\n      id: 1,\n      text: 'You need to enable bluetooth',\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n  public showWarning(msg) {\n    let alert = this.alertCtrl.create({\n      title: 'Warning',\n      message: msg,\n      buttons: [\n        {\n          text: 'Ok'\n        }],\n    });\n    alert.present();\n  }\n\n  public showLocationAuthorizationNoti() {\n    this.localNotifications.schedule({\n      id: 2,\n      text: '',\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n  public showNetworkNoti() {\n    this.localNotifications.schedule({\n      id: 3,\n      text: 'Please check your network connection',\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n  public generalErrorHandler() {\n    this.localNotifications.schedule({\n      id: 4,\n      text: 'The app is no longer active. Please re-open it',\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n  public showLogoutNoti() {\n    this.localNotifications.schedule({\n      id: 5,\n      text: 'You have been logged out. Please log in to activate the app',\n      led: 'FF0000',\n      sound: null\n    });\n  }\n\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/general-provider.service.ts"],"sourceRoot":""}